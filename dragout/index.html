<!DOCTYPE html> 
<html> 
<head>
<meta charset=utf-8 />
<link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'> 
<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js" type="text/javascript"></script>
<style>
body {background: white; color: #333; font-family: 'Inconsolata', Verdana, sans-serif;}
#game {
    background: red; 
    color: yellow; 
    position:relative; 
    width: 500px; 
    height:420px;
    border: 10px solid black;
    z-index: 0;
    margin-left: auto;
    margin-right: auto;}
a:link {color: green; }
a:visited {color: darkgreen;}
</style>
<script>
$(function() {
var token = false;
var loadFrame = function() {
    $("#iframe").attr('src', 'outer.html?' + Math.random());
    $('#dropper').bind('drop', function(evt) {
        setTimeout(function() {
        	var urlmatch = $("#dropper").val().match(/token=([a-h0-9]+)$/);
        	if (urlmatch) {
	            token = urlmatch[1];
	            alert(token);
        	} else {}
        }, 100);
    });
};

if (location.href.match(/show/)) {
	$(function() {
		$('#iframe').css({opacity: 0.8, width: '300px', height: '200px'});
		$("#dropper").css({opacity: 0.8});
	});
}

loadFrame();
});
</script>
</head>
<body>
<h1>UI-redressing drag-out demo</h1>
<p>by <a rel="me" href="http://blog.kotowicz.net">Krzysztof Kotowicz</a> 
</p>
<p>Firefox / Mozilla only</p>

<div class=game id=game>

<img class="paper" style="position:absolute;left: 5px; top:0px" draggable="true" src="paper.png" />
<iframe scrolling=no id=iframe style="z-index:10;position: absolute;left:5px;opacity:0;margin:0;padding:0;width: 20px; height: 20px;overflow:hidden"></iframe>
<textarea style="left:35px; position: absolute; z-index:10;opacity:0; height: 400px; width: 400px;" id=dropper></textarea>
<img style="position:absolute;left:50px; top: 20px; z-index: 5;" src="trash.png">

</div>
</body>
</html>
